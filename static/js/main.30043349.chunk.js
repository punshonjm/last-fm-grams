(this["webpackJsonplast-fm-grams"]=this["webpackJsonplast-fm-grams"]||[]).push([[0],{197:function(e,t,a){e.exports=a(396)},202:function(e,t,a){},307:function(e,t,a){},396:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),s=a.n(c),l=(a(202),a(13)),u=a.n(l),o=a(26),i=a(17),m=a(398),p=a(54),f=a(22),g=a(400),y=a(403),d=a(405),E=a(123),h=a(124),b=a(167),v=a.n(b),k=a(168),w=a.n(k),x=a(169),j=a.n(x),O=a(195),S=function(e,t){var a={},n=null,r=0;return e.forEach((function(e){e[t]!==n&&(r+=1,n=e[t],a["".concat(r,".").concat(n)]=Object(O.a)({},e,{key:n,items:[e]})),a["".concat(r,".").concat(n)].items.push(e)})),Object.values(a)},T=v.a.create({baseURL:"https://ws.audioscrobbler.com/2.0"});T.interceptors.request.use((function(e){return e.params=e.params||{},e.params.api_key="cd948c3e719c7c938523be6bcea7300a",e.params.format="json",e}));var A=function(e){return T.get("/?method=user.getinfo&user=".concat(e))},I=function(e){return T.get("/?method=user.getfriends&user=".concat(e))},C=function(e){return T.get("/?method=user.getrecenttracks&user=".concat(e))},N=function(e){return T.get("/?method=user.gettopalbums&user=".concat(e))},B=function(e){return T.get("/?method=user.gettopartists&user=".concat(e))},F=function(e){return T.get("/?method=user.gettoptracks&user=".concat(e))},J=function(e){return T.get("/?method=user.getweeklyalbumchart&user=".concat(e))},L=function(e){return T.get("/?method=user.getweeklyartistchart&user=".concat(e))},M=function(e){return T.get("/?method=user.getweeklytrackchart&user=".concat(e))},P=function(e){var t=e.reverse();return Object(i.a)(t,1)[0]},U=function(e){return e["#text"]||e},z=function(e,t){return e.map((function(e){var a=e.artist,n=e.album,r=e.name,c=e.mbid,s=e.url,l=e.date,u=e.image;return{artist:U(a),album:U(n),name:r,mbid:c,url:s,date:U(l),image:U(P(u)),user:t}}))},W=function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n,r,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:return a=e.sent,n=a.data.friends.user,r=[t].concat(Object(h.a)(n.map((function(e){return e.name})))),e.next=7,Promise.all(r.map(function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:return a=e.sent,n=a.data,r=n.recenttracks.track,e.abrupt("return",S(z(r,t),"album"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return c=e.sent,s=w()(j.a.apply(void 0,Object(h.a)(c)),["date"],["desc"]),e.abrupt("return",{data:s});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=(a(307),a(401)),R=a(404),q=a(406),G=a(399),K=a(409),$=a(408),_=a(407),D=a(410),Q=a(170),V=a.n(Q),X=a(402),Y=r.a.createContext(void 0),Z=function(e){var t=e.children,a=r.a.useState(void 0),n=Object(i.a)(a,2),c=n[0],s=n[1],l={user:c,setUser:function(e){localStorage.setItem("user",JSON.stringify(c)),s(e)}},m=function(){var e=Object(o.a)(u.a.mark((function e(){var t,a,n,r,l,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,A(c.name);case 4:t=e.sent,a=t.data.user,n=a.playcount,r=a.name,l=a.url,o=a.country,s({playcount:n,name:r,url:l,country:o});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){if(void 0===c){var e=localStorage.getItem("user");if(e)try{return s(JSON.parse(e)),void m()}catch(t){return void s(void 0)}}else localStorage.setItem("user",JSON.stringify(c))}),[c]),r.a.createElement(Y.Provider,{value:l},t)},ee=function(){return r.a.useContext(Y)},te=H.a.Title,ae=H.a.Text,ne=function(){var e=r.a.useState(!1),t=Object(i.a)(e,2),a=t[0],n=t[1],c=r.a.useState({}),s=Object(i.a)(c,2),l=(s[0],s[1]),m=r.a.useState([]),y=Object(i.a)(m,2),d=y[0],E=y[1],h=ee().user,b=function(){var e=Object(o.a)(u.a.mark((function e(){var t,a,r,c,s,o,m,p,f,g,y;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.next=3,Promise.all([W(h.name),C(h.name),N(h.name),B(h.name),F(h.name),J(h.name),L(h.name),M(h.name)]);case 3:t=e.sent,a=t.map((function(e){return e.data})),r=Object(i.a)(a,8),c=r[0],s=r[1].recenttracks,o=r[2].topalbums,m=r[3].topartists,p=r[4].toptracks,f=r[5].weeklyalbumchart,g=r[6].weeklyartistchart,y=r[7].weeklytrackchart,l({recentTracks:s,topAlbums:o,topArtists:m,topTracks:p,weeklyAlbums:f,weeklyArtists:g,weeklyTracks:y}),E(c),n(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){b()}),[null]),a?r.a.createElement(p.a,{justify:"center"},r.a.createElement(f.a,{span:24,lg:12},Array(3).fill(null).map((function(){return r.a.createElement(g.a,{key:V()("skeleton"),style:{marginBottom:"1em"}},r.a.createElement(X.a,{avatar:!0,paragraph:{rows:4}}))})))):r.a.createElement(r.a.Fragment,null,d.map((function(e){return r.a.createElement(p.a,{justify:"center",key:"".concat(e.user,".").concat(e.date)},r.a.createElement(f.a,{span:24,lg:12},r.a.createElement(g.a,{style:{marginBottom:"1em"},cover:r.a.createElement("img",{alt:"".concat(e.artist," - ").concat(e.album," - ").concat(e.name),src:e.image})},r.a.createElement(g.a.Meta,{title:r.a.createElement(r.a.Fragment,null,r.a.createElement(te,{level:4,style:{display:"block",marginBottom:"0"}},e.key||e.name),e.key?r.a.createElement(ae,{style:{display:"block"},strong:!0},e.artist):r.a.createElement(r.a.Fragment,null,r.a.createElement(ae,{style:{display:"block"},type:"secondary"},e.album),r.a.createElement(ae,{style:{display:"block"},strong:!0},e.artist)))}),r.a.createElement("div",{style:{marginTop:"1em"}},r.a.createElement(p.a,null,r.a.createElement(f.a,{span:12},r.a.createElement(ae,{strong:!0},e.user)),r.a.createElement(f.a,{span:12,style:{textAlign:"right"}},r.a.createElement(ae,{type:"secondary"},"Played at ",e.date)))))))})))},re=H.a.Text,ce=function(){var e=r.a.useState(!0),t=Object(i.a)(e,2),a=t[0],n=t[1],c=ee().user;return r.a.createElement(m.a,{style:{minHeight:"100vh"}},r.a.createElement(m.a.Sider,{breakpoint:"lg",collapsedWidth:"0",collapsible:!0,collapsed:a,trigger:null},r.a.createElement("div",{className:"logo",style:{height:"64px"}}),r.a.createElement(R.a,{mode:"inline",theme:"dark",style:{height:"100%",borderRight:0},defaultSelectedKeys:["1"]},r.a.createElement(R.a.Item,{key:"1"},r.a.createElement(K.a,null),r.a.createElement("span",null,"Timeline")))),r.a.createElement(m.a,null,r.a.createElement(m.a.Header,{style:{background:"#fff",padding:0}},r.a.createElement("span",{onClick:function(){return n(!a)},className:"trigger",style:{marginLeft:"16px"}},a?r.a.createElement($.a,{style:{fontSize:"2em"}}):r.a.createElement(_.a,{style:{fontSize:"2em"}})),r.a.createElement("span",{style:{float:"right"}},r.a.createElement(re,{strong:!0,style:{margin:"0 .5em"}},c.name),r.a.createElement(q.a,{color:"geekblue"},c.playcount," plays"),r.a.createElement(G.a,{size:"large",icon:r.a.createElement(D.a,null)}))),r.a.createElement(m.a.Content,{style:{margin:"2em"}},r.a.createElement(p.a,{gutter:24},r.a.createElement(f.a,{span:24},r.a.createElement(ne,null))))))};function se(){var e=r.a.useState(""),t=Object(i.a)(e,2),a=t[0],n=t[1],c=ee(),s=c.user,l=c.setUser,h=function(){var e=Object(o.a)(u.a.mark((function e(){var t,n,r,c,s,o,i,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(a);case 3:t=e.sent,n=t.data.user,r=n.playcount,c=n.name,s=n.url,o=n.country,l({playcount:r,name:c,url:s,country:o}),e.next=18;break;case 9:if(e.prev=9,e.t0=e.catch(0),!(i=e.t0.response)){e.next=17;break}if(!(m=i.data).message){e.next=17;break}return console.log(m.message),e.abrupt("return");case 17:console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return s?r.a.createElement(ce,null):r.a.createElement(m.a,null,r.a.createElement(p.a,{gutter:24,style:{height:"100vh"},justify:"center"},r.a.createElement(f.a,{span:12},r.a.createElement(g.a,{className:"App",title:"Last FM Grams",style:{marginTop:"2em"}},r.a.createElement(y.a.Item,{label:"Last.FM Username"},r.a.createElement(d.a,{value:a,onChange:function(e){var t=e.target;return n(t.value)}})),r.a.createElement(y.a.Item,null,r.a.createElement(E.a,{onClick:h,type:"primary"},"Setup"))))))}var le=function(){return r.a.createElement(Z,null,r.a.createElement(p.a,{gutter:24},r.a.createElement(f.a,{span:24},r.a.createElement(se,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[197,1,2]]]);
//# sourceMappingURL=main.30043349.chunk.js.map